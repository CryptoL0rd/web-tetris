# üîå API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è TETRIS

## –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞

**–í–µ—Ä—Å–∏—è API:** 2.0.0
**–°—Ç–∞—Ç—É—Å:** –°—Ç–∞–±–∏–ª—å–Ω—ã–π
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** ES6+

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä API](#–æ–±–∑–æ—Ä-api)
2. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–ª–∞—Å—Å—ã)
3. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã-–∏-—Ç–∏–ø—ã)
4. [–ú–µ—Ç–æ–¥—ã –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞](#–º–µ—Ç–æ–¥—ã-–∏–≥—Ä–æ–≤–æ–≥–æ-–¥–≤–∏–∂–∫–∞)
5. [–°–æ–±—ã—Ç–∏—è –∏ –∫–æ–ª–ª–±—ç–∫–∏](#—Å–æ–±—ã—Ç–∏—è-–∏-–∫–æ–ª–ª–±—ç–∫–∏)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
7. [–†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω—ã](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è-–∏-–ø–ª–∞–≥–∏–Ω—ã)
8. [–û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)

---

## –û–±–∑–æ—Ä API

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API

API –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ TETRIS –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ü–µ–ª—å
- **–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSDoc –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤
- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

### 1. TetrisGame

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –∏–≥—Ä—ã.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–≥—Ä—ã TETRIS
 * @param {HTMLCanvasElement} canvas - –û—Å–Ω–æ–≤–Ω–æ–π canvas —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
 * @param {Object} options - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–≥—Ä—ã
 * @param {HTMLCanvasElement} options.nextPieceCanvas - Canvas –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–≥—É—Ä—ã
 * @param {Object} options.grid - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
 * @param {number} options.grid.cols - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
 * @param {number} options.grid.rows - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—è–¥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
 * @param {Object} options.performance - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
 * @param {number} options.performance.targetFPS - –¶–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 60)
 */
const game = new TetrisGame(canvas, {
    nextPieceCanvas: nextPieceCanvas,
    grid: { cols: 10, rows: 20 },
    performance: { targetFPS: 60 }
});
```

#### –°–≤–æ–π—Å—Ç–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `score` | `number` | –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç –∏–≥—Ä–æ–∫–∞ |
| `level` | `number` | –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ |
| `lines` | `number` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∏—â–µ–Ω–Ω—ã—Ö –ª–∏–Ω–∏–π |
| `isPaused` | `boolean` | –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—É–∑—ã –∏–≥—Ä—ã |
| `isGameOver` | `boolean` | –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã |
| `currentPiece` | `Object|null` | –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–≥—É—Ä–∞ |
| `nextPiece` | `Object|null` | –°–ª–µ–¥—É—é—â–∞—è —Ñ–∏–≥—É—Ä–∞ |
| `grid` | `Array<Array>` | –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ |

### 2. Logger

–°–∏—Å—Ç–µ–º–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
 * @param {Object} options - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
 * @param {string} options.level - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ('DEBUG', 'INFO', 'WARN', 'ERROR')
 * @param {number} options.maxHistorySize - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1000)
 */
const logger = new Logger({
    level: 'INFO',
    maxHistorySize: 1000
});
```

#### –ú–µ—Ç–æ–¥—ã

##### log(level, message, context, data)

–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.

```javascript
/**
 * –ó–∞–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥
 * @param {string} level - –£—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏ ('DEBUG', 'INFO', 'WARN', 'ERROR', 'CRITICAL')
 * @param {string} message - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
 * @param {string} context - –ö–æ–Ω—Ç–µ–∫—Å—Ç (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã)
 * @param {Object} data - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
 */
logger.log('INFO', '–ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞', 'GAME_ENGINE', {
    sessionId: 'sess_12345',
    userAgent: navigator.userAgent
});
```

##### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
logger.logGameEvent('LINES_CLEARED', { lines: 4, points: 800 });

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
logger.logUserAction('HARD_DROP', { piece: 'T', distance: 5 });

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
logger.logPerformance({
    fps: 60,
    memoryUsage: '45MB',
    renderTime: '8ms'
});
```

### 3. ErrorHandler

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
 * @param {Logger} logger - –≠–∫–∑–µ–º–ø–ª—è—Ä –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ—à–∏–±–æ–∫
 */
const errorHandler = new ErrorHandler(logger);
```

#### –ú–µ—Ç–æ–¥—ã

##### handleError(error, context, showNotification)

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–ø—ã—Ç–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

```javascript
/**
 * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
 * @param {Error} error - –û–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏ JavaScript
 * @param {string} context - –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏
 * @param {boolean} showNotification - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
 * @returns {boolean} –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
 */
try {
    riskyOperation();
} catch (error) {
    const recovered = await errorHandler.handleError(error, 'CANVAS_RENDER');
    if (!recovered) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
        showErrorMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞');
    }
}
```

### 4. PerformanceManager

–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ —Ü–µ–ª–µ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
 * @param {Object} options - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
 * @param {number} options.targetFPS - –¶–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤
 * @param {boolean} options.adaptive - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 */
const performanceManager = new PerformanceManager({
    targetFPS: 60,
    adaptive: true
});
```

#### –ú–µ—Ç–æ–¥—ã

##### shouldRender(currentTime)

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞–¥—Ä–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Ü–µ–ª–µ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

```javascript
/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–¥—Ä–∞
 * @param {number} currentTime - –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –æ—Ç requestAnimationFrame
 * @returns {boolean} –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
 */
function gameLoop(currentTime) {
    if (performanceManager.shouldRender(currentTime)) {
        updateGame();
        render();
    }

    requestAnimationFrame(gameLoop);
}
```

### 5. SettingsManager

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–≥—Ä—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
 * @param {Object} defaultSettings - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
 */
const settingsManager = new SettingsManager({
    theme: 'matrix',
    soundEnabled: true,
    volume: 70,
    gridSize: 10
});
```

#### –ú–µ—Ç–æ–¥—ã

##### setTheme(themeName)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤–æ–π —Ç–µ–º—ã –∏–≥—Ä—ã.

```javascript
/**
 * –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤–æ–π —Ç–µ–º—ã
 * @param {string} themeName - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã ('classic', 'dark', 'neon', 'matrix')
 */
settingsManager.setTheme('neon');
```

##### saveSettings()

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

```javascript
/**
 * –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ localStorage
 */
settingsManager.saveSettings();
```

---

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤

#### Piece (—Ñ–∏–≥—É—Ä–∞)

```javascript
/**
 * @typedef {Object} Piece
 * @property {string} type - –¢–∏–ø —Ñ–∏–≥—É—Ä—ã ('I', 'O', 'T', 'S', 'Z', 'J', 'L')
 * @property {number[][]} shape - –ú–∞—Ç—Ä–∏—Ü–∞ —Ñ–æ—Ä–º—ã —Ñ–∏–≥—É—Ä—ã
 * @property {string} color - –¶–≤–µ—Ç —Ñ–∏–≥—É—Ä—ã –≤ hex —Ñ–æ—Ä–º–∞—Ç–µ
 * @property {number} row - –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–∑–∏—Ü–∏–∏
 * @property {number} col - –¢–µ–∫—É—â–∞—è –∫–æ–ª–æ–Ω–∫–∞ –ø–æ–∑–∏—Ü–∏–∏
 * @property {number} rotation - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ (0-3)
 */
```

#### GameState (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã)

```javascript
/**
 * @typedef {Object} GameState
 * @property {number} score - –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç
 * @property {number} level - –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
 * @property {number} lines - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∏—â–µ–Ω–Ω—ã—Ö –ª–∏–Ω–∏–π
 * @property {boolean} isPaused - –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—É–∑—ã
 * @property {boolean} isGameOver - –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
 * @property {Piece|null} currentPiece - –ê–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–≥—É—Ä–∞
 * @property {Piece|null} nextPiece - –°–ª–µ–¥—É—é—â–∞—è —Ñ–∏–≥—É—Ä–∞
 */
```

#### Settings (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

```javascript
/**
 * @typedef {Object} Settings
 * @property {string} theme - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã
 * @property {boolean} soundEnabled - –í–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
 * @property {boolean} musicEnabled - –í–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
 * @property {number} volume - –£—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ (0-100)
 * @property {number} gridSize - –†–∞–∑–º–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
 * @property {boolean} showGhostPiece - –ü–æ–∫–∞–∑–∞—Ç—å ghost piece
 */
```

---

## –ú–µ—Ç–æ–¥—ã –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞

### –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π

#### startGame()

–ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏.

```javascript
/**
 * –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
 * @returns {boolean} –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞
 */
const success = tetrisGame.startGame();
```

#### togglePause()

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞—É–∑—ã.

```javascript
/**
 * –ü–∞—É–∑–∞/–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–≥—Ä—ã
 * @returns {boolean} –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—É–∑—ã
 */
const isNowPaused = tetrisGame.togglePause();
```

#### gameOver()

–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏.

```javascript
/**
 * –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
 * @returns {Object} –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã
 */
const results = tetrisGame.gameOver();
// results = { score: 1500, level: 8, lines: 45, playTime: 120000 }
```

### –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–≥—É—Ä–∞–º–∏

#### movePiece(direction)

–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–≥—É—Ä—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.

```javascript
/**
 * –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã
 * @param {string} direction - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ('left', 'right', 'down')
 * @returns {boolean} –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
 */
const moved = tetrisGame.movePiece('left');
```

#### rotatePiece()

–ü–æ–≤–æ—Ä–æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–≥—É—Ä—ã –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ.

```javascript
/**
 * –ü–æ–≤–æ—Ä–æ—Ç —Ñ–∏–≥—É—Ä—ã
 * @returns {boolean} –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞
 */
const rotated = tetrisGame.rotatePiece();
```

#### hardDropPiece()

–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã –¥–æ —É–ø–æ—Ä–∞ (Hard Drop).

```javascript
/**
 * –ñ–µ—Å—Ç–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã
 * @returns {number} –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–∞–¥–µ–Ω–∏—è (–¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤)
 */
const dropDistance = tetrisGame.hardDropPiece();
```

### –ú–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### getGameState()

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã.

```javascript
/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
 * @returns {GameState} –û–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
 */
const state = tetrisGame.getGameState();
console.log(`Score: ${state.score}, Level: ${state.level}`);
```

#### getGrid()

–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ø–∏–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è.

```javascript
/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ø–∏–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
 * @returns {number[][]} –î–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
 */
const grid = tetrisGame.getGrid();
// grid[row][col] —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∏–ø –±–ª–æ–∫–∞ (0 - –ø—É—Å—Ç–æ, 1-7 - —Ç–∏–ø—ã —Ñ–∏–≥—É—Ä)
```

#### getStatistics()

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

```javascript
/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–∞
 * @returns {Object} –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
 */
const stats = tetrisGame.getStatistics();
// stats = { gamesPlayed: 42, highScore: 15680, totalLines: 387 }
```

---

## –°–æ–±—ã—Ç–∏—è –∏ –∫–æ–ª–ª–±—ç–∫–∏

### –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π

–ò–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö.

#### –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

```javascript
/**
 * –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
 * @param {string} eventName - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
 * @param {Function} callback - –§—É–Ω–∫—Ü–∏—è-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è
 */
tetrisGame.on('linesCleared', (data) => {
    console.log(`–û—á–∏—â–µ–Ω–æ –ª–∏–Ω–∏–π: ${data.count}`);
    updateScoreDisplay(data.points);
});

tetrisGame.on('gameOver', (data) => {
    console.log(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: ${data.score}`);
    showGameOverScreen(data);
});

tetrisGame.on('levelUp', (data) => {
    console.log(`–ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è! –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${data.newLevel}`);
    showLevelUpAnimation();
});
```

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

| –°–æ–±—ã—Ç–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| `gameStarted` | `{ timestamp }` | –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –∏–≥—Ä—ã |
| `gamePaused` | `{ wasPlaying }` | –ü–∞—É–∑–∞ –∏–≥—Ä—ã |
| `gameResumed` | `{ wasPaused }` | –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–≥—Ä—ã |
| `gameOver` | `{ score, level, lines, playTime }` | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã |
| `pieceSpawned` | `{ piece, position }` | –ü–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ–∏–≥—É—Ä—ã |
| `linesCleared` | `{ count, points, newLevel }` | –û—á–∏—Å—Ç–∫–∞ –ª–∏–Ω–∏–π |
| `levelUp` | `{ oldLevel, newLevel }` | –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è |
| `hardDrop` | `{ piece, distance, bonusPoints }` | –ñ–µ—Å—Ç–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ |

### –ö–æ–ª–ª–±—ç–∫–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–ª–±—ç–∫–æ–≤ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```javascript
const game = new TetrisGame(canvas, {
    callbacks: {
        onUpdate: (deltaTime) => {
            // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–≥—Ä—ã
            updateUI(deltaTime);
        },
        onRender: (interpolation) => {
            // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
            updateAnimations(interpolation);
        },
        onError: (error, context) => {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞
            handleGameError(error, context);
        }
    }
});
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
const canvas = document.getElementById('gameCanvas');
const nextPieceCanvas = document.getElementById('nextPieceCanvas');

const game = new TetrisGame(canvas, {
    nextPieceCanvas: nextPieceCanvas,
    grid: { cols: 10, rows: 20 }
});

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
game.on('gameStarted', () => {
    console.log('–ò–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞!');
});

game.on('linesCleared', (data) => {
    console.log(`–û—á–∏—â–µ–Ω–æ ${data.count} –ª–∏–Ω–∏–π, +${data.points} –æ—á–∫–æ–≤`);
});

game.on('gameOver', (data) => {
    console.log(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á–µ—Ç: ${data.score}`);
});

// –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
game.startGame();
```

### –ü—Ä–∏–º–µ—Ä 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```javascript
class TetrisIntegration {
    constructor(container) {
        this.container = container;
        this.game = null;
        this.ui = new TetrisUI();
        this.audio = new TetrisAudio();
        this.statistics = new StatisticsTracker();
    }

    async initialize() {
        try {
            // –°–æ–∑–¥–∞–Ω–∏–µ canvas —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const gameCanvas = this.createGameCanvas();
            const nextPieceCanvas = this.createNextPieceCanvas();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞
            this.game = new TetrisGame(gameCanvas, {
                nextPieceCanvas: nextPieceCanvas,
                performance: { targetFPS: 60 }
            });

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            this.setupEventHandlers();

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
            await this.loadAssets();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            this.ui.initialize(this.game);

            console.log('Tetris –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
            this.handleInitializationError(error);
        }
    }

    setupEventHandlers() {
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
        this.game.on('gameOver', (data) => {
            this.statistics.recordGame(data);
            this.ui.showGameOverScreen(data);
            this.audio.playGameOverSound();
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ª–∏–Ω–∏–π
        this.game.on('linesCleared', (data) => {
            this.ui.updateScore(data.points);
            this.audio.playLineClearSound();
            this.ui.showLineClearEffect(data.count);
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
        this.game.on('error', (error) => {
            this.handleGameError(error);
        });
    }

    async loadAssets() {
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
        this.audio.loadSounds([
            'line_clear.mp3',
            'game_over.mp3',
            'piece_rotate.mp3'
        ]);

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        await this.ui.loadSprites();
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
const tetrisApp = new TetrisIntegration(document.getElementById('tetris-container'));
tetrisApp.initialize();
```

### –ü—Ä–∏–º–µ—Ä 3: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–≥—Ä—ã
class GameAnalyzer {
    constructor(game) {
        this.game = game;
        this.analytics = [];
        this.setupAnalytics();
    }

    setupAnalytics() {
        // –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
        this.game.on('pieceSpawned', (data) => {
            this.analyzePiecePlacement(data.piece);
        });

        // –ê–Ω–∞–ª–∏–∑ –∫–æ–º–±–æ-–∞—Ç–∞–∫
        this.game.on('linesCleared', (data) => {
            if (data.count >= 4) {
                this.recordTetris(data);
            }
        });
    }

    analyzePiecePlacement(piece) {
        const efficiency = this.calculatePlacementEfficiency(piece);
        this.analytics.push({
            type: 'placement',
            piece: piece.type,
            efficiency: efficiency,
            timestamp: Date.now()
        });
    }

    calculatePlacementEfficiency(piece) {
        // –ê–Ω–∞–ª–∏–∑ —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–∞ —Ñ–∏–≥—É—Ä–∞
        const grid = this.game.getGrid();
        const holes = this.countHoles(grid);
        const height = this.getMaxHeight(grid);

        return {
            holeCount: holes,
            maxHeight: height,
            score: Math.max(0, 100 - holes * 10 - height * 2)
        };
    }

    getAnalyticsReport() {
        return {
            totalPieces: this.analytics.length,
            averageEfficiency: this.calculateAverageEfficiency(),
            tetrisCount: this.countTetris(),
            recommendations: this.generateRecommendations()
        };
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
const analyzer = new GameAnalyzer(tetrisGame);
game.on('gameOver', () => {
    const report = analyzer.getAnalyticsReport();
    console.log('–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç:', report);
});
```

### –ü—Ä–∏–º–µ—Ä 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```javascript
class TetrisCloudIntegration {
    constructor(game, config) {
        this.game = game;
        this.apiKey = config.apiKey;
        this.endpoint = config.endpoint;
        this.sessionId = this.generateSessionId();
    }

    async syncGameState() {
        const gameState = this.game.getGameState();

        try {
            await fetch(`${this.endpoint}/sessions/${this.sessionId}/state`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.apiKey}`
                },
                body: JSON.stringify(gameState)
            });
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:', error);
        }
    }

    async submitScore(scoreData) {
        try {
            const response = await fetch(`${this.endpoint}/scores`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.apiKey}`
                },
                body: JSON.stringify({
                    ...scoreData,
                    sessionId: this.sessionId,
                    timestamp: new Date().toISOString()
                })
            });

            return await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—á–µ—Ç–∞:', error);
            return null;
        }
    }

    setupAutoSync() {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(() => {
            this.syncGameState();
        }, 30000);

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö
        this.game.on('linesCleared', () => {
            this.syncGameState();
        });

        this.game.on('gameOver', (data) => {
            this.syncGameState();
            this.submitScore(data);
        });
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
const cloudIntegration = new TetrisCloudIntegration(tetrisGame, {
    apiKey: 'your-api-key',
    endpoint: 'https://api.tetris-cloud.com'
});

cloudIntegration.setupAutoSync();
```

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω—ã.

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

```javascript
class TetrisPlugin {
    constructor(game, options = {}) {
        this.game = game;
        this.options = options;
        this.enabled = true;
    }

    /**
     * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
     */
    initialize() {
        if (this.options.autoStart !== false) {
            this.start();
        }
    }

    /**
     * –ó–∞–ø—É—Å–∫ –ø–ª–∞–≥–∏–Ω–∞
     */
    start() {
        this.setupEventListeners();
        this.onStart();
    }

    /**
     * –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞
     */
    stop() {
        this.removeEventListeners();
        this.onStop();
    }

    /**
     * –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
     */
    setupEventListeners() {
        // –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    }

    /**
     * –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
     */
    removeEventListeners() {
        // –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    }

    /**
     * –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
     */
    onStart() {
        // –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    }

    /**
     * –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
     */
    onStop() {
        // –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    }
}
```

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ –≤ –∏–≥—Ä–æ–≤–æ–º –¥–≤–∏–∂–∫–µ
tetrisGame.registerPlugin('analytics', new AnalyticsPlugin(tetrisGame));
tetrisGame.registerPlugin('achievements', new AchievementsPlugin(tetrisGame));

// –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
tetrisGame.enablePlugin('analytics');
tetrisGame.disablePlugin('achievements');
```

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

#### StatisticsPlugin

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∏–≥—Ä–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

```javascript
const statsPlugin = new StatisticsPlugin(tetrisGame, {
    autoSave: true,
    saveInterval: 60000, // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    exportFormats: ['json', 'csv']
});

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
statsPlugin.exportData('json');
```

#### AchievementsPlugin

–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ –Ω–∞–≥—Ä–∞–¥.

```javascript
const achievementsPlugin = new AchievementsPlugin(tetrisGame, {
    notifications: true,
    soundEffects: true
});

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
achievementsPlugin.unlockAchievement('FIRST_TETRIS');
achievementsPlugin.checkProgress('SPEED_DEMON');
```

---

## –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

#### –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

```javascript
// –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
const urlParams = new URLSearchParams(window.location.search);
if (urlParams.get('debug') === 'true') {
    tetrisGame.enableDebugMode();
}

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
tetrisGame.enableDebugMode({
    showFPS: true,
    showGrid: true,
    showCollisionBoxes: true,
    logLevel: 'DEBUG'
});
```

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏

```javascript
// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –æ—Ç–ª–∞–¥–∫–∏
tetrisGame.showDebugPanel();

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
tetrisGame.logCurrentState();

// –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
tetrisGame.startProfiling();
setTimeout(() => {
    const profile = tetrisGame.stopProfiling();
    console.log('–ü—Ä–æ—Ñ–∏–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:', profile);
}, 10000);
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
const diagnostics = tetrisGame.getDiagnostics();

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
diagnostics = {
    version: '2.0.0',
    performance: {
        fps: 60,
        memoryUsage: '45MB',
        renderTime: '8ms'
    },
    errors: {
        count: 0,
        lastError: null,
        errorHistory: []
    },
    state: {
        score: 1500,
        level: 8,
        lines: 45,
        isPaused: false,
        isGameOver: false
    },
    plugins: [
        { name: 'statistics', enabled: true },
        { name: 'achievements', enabled: false }
    ]
};
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
tetrisGame.on('diagnosticUpdate', (diagnostics) => {
    if (diagnostics.performance.fps < 30) {
        console.warn('–ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:', diagnostics.performance);
    }

    if (diagnostics.errors.count > 0) {
        console.error('–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏:', diagnostics.errors);
    }
});
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API

API –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ TETRIS –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å**: –ù–∞–¥ –≤—Å–µ–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∏–≥—Ä—ã
- **–û—Ç–ª–∞–¥–∫–∞**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å–æ –≤—Å–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∏ —Å–æ–±—ã—Ç–∏—è–º–∏
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø–∏–∑–∞—Ü–∏—é**: –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ JSDoc –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –ª—É—á—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ try-catch –±–ª–æ–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ü—Ä–æ–≤–æ–¥–∏—Ç–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ü—Ä–∏–º–µ—Ä—ã**: –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–°–æ–æ–±—â–µ—Å—Ç–≤–æ**: –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

---

**–í–µ—Ä—Å–∏—è API:** 2.0.0
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –Ø–Ω–≤–∞—Ä—å 2024
**–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ TETRIS